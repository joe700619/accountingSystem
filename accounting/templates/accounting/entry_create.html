{% extends 'accounting/base.html' %}

{% block title %}新增傳票{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto bg-white p-8 rounded shadow">
    <h1 class="text-2xl font-bold mb-6 text-gray-700">新增傳票</h1>

    <form method="post">
        {% csrf_token %}

        <div class="grid grid-cols-2 gap-4 mb-6 p-4 bg-blue-50 rounded">
            <div>
                <label class="block text-sm font-bold mb-2">日期</label>
                {{ form.date }}
            </div>
            <div>
                <label class="block text-sm font-bold mb-2">摘要</label>
                {{ form.description }}
            </div>
        </div>

        <table class="w-full mb-6">
            <thead class="bg-gray-200">
                <tr>
                    <th class="p-2 text-left">會計科目</th>
                    <th class="p-2 text-left">摘要</th>
                    <th class="p-2 text-right">借方</th>
                    <th class="p-2 text-right">貸方</th>
                    <th class="p-2 text-center">刪除</th>
                </tr>
            </thead>
            <tbody id="journal-items">
                {{ formset.management_form }}
                {% for form in formset %}
                <tr class="border-b">
                    {% for hidden in form.hidden_fields %}
                    {{ hidden }}
                    {% endfor %}

                    <td class="p-2 w-1/4">{{ form.account }}</td>
                    <td class="p-2 w-1/3">{{ form.description }}</td>
                    <td class="p-2">{{ form.debit }}</td>
                    <td class="p-2">{{ form.credit }}</td>
                    <td class="p-2 text-center">{{ form.DELETE }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div id="balance-status" class="mb-6 p-4 bg-gray-50 text-right rounded border">
            <div class="text-gray-500">等待輸入...</div>
        </div>

        <div class="flex justify-end gap-4">
            <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"
                onclick="window.history.back()">取消</button>
            <button type="submit"
                class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-bold">儲存傳票</button>
        </div>
    </form>
</div>

<style>
    .form-input,
    .form-select {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #d1d5db;
        border-radius: 0.25rem;
    }
</style>
{% endblock %}